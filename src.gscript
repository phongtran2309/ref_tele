{"$type":"GPMAutomateEditor.Models.Editor, GPMAutomateEditor.Models","before_init":{"$type":"GPMAutomateEditor.Models.NormalBlockNode, GPMAutomateEditor.Models","nodes":[{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":1,"element_xpath":null,"output_variable_name":"","delay":"0,0","id":"c6d67f3d-78db-4a4a-b50d-2281b9b8e4e1","display_text":null,"raw_input":"[{\"Key\":\"VALUE\",\"Value\":\"Lưu ý trước khi sử dụng ta cần làm các bước sau\"},{\"Key\":\"ALLOW_USER_INPUT\",\"Value\":\"True\"},{\"Key\":\"USER_INPUT_TYPE\",\"Value\":\"Text\"}]","comment":"Lưu ý trước khi sử dụng"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":1,"element_xpath":null,"output_variable_name":"","delay":"0,0","id":"80d82028-4444-4350-a69c-7560fb6c2887","display_text":null,"raw_input":"[{\"Key\":\"VALUE\",\"Value\":\"Bước 1: mở regedit.exe (window + R)\"},{\"Key\":\"ALLOW_USER_INPUT\",\"Value\":\"True\"},{\"Key\":\"USER_INPUT_TYPE\",\"Value\":\"Text\"}]","comment":"Bước 1: mở regedit.exe (window + R)"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":1,"element_xpath":null,"output_variable_name":null,"delay":"0,0","id":"cf8b8b34-0198-41be-bfda-1b399cbb9936","display_text":null,"raw_input":"[{\"Key\":\"VALUE\",\"Value\":\"Bước 2: trong regedit mở đường dẫn Computer\\\\HKEY_CLASSES_ROOT\\\\tg\"},{\"Key\":\"ALLOW_USER_INPUT\",\"Value\":\"True\"},{\"Key\":\"USER_INPUT_TYPE\",\"Value\":\"Text\"}]","comment":"Bước 2: trong regedit mở đường dẫn Computer\\HKEY_CLASSES_ROOT\\tg"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":1,"element_xpath":null,"output_variable_name":null,"delay":"0,0","id":"45cc5711-f9f3-4c5e-91c2-a5f6423aeb91","display_text":null,"raw_input":"[{\"Key\":\"VALUE\",\"Value\":\"Bước 3: Ở phần bên phải thay \\\"URL Protocol\\\" thành \\\"URL Protocol1\\\" \"},{\"Key\":\"ALLOW_USER_INPUT\",\"Value\":\"True\"},{\"Key\":\"USER_INPUT_TYPE\",\"Value\":\"Text\"}]","comment":"Bước 3: Ở phần bên phải thay \"URL Protocol\" thành \"URL Protocol1\" "},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":1,"element_xpath":null,"output_variable_name":"botLink","delay":"0,0","id":"af38fcf5-066f-49dc-96d8-26dda9c8b86c","display_text":null,"raw_input":"[{\"Key\":\"VALUE\",\"Value\":\"\"},{\"Key\":\"ALLOW_USER_INPUT\",\"Value\":\"True\"},{\"Key\":\"USER_INPUT_TYPE\",\"Value\":\"Text\"}]","comment":"Nhập bot link ref"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":1,"element_xpath":null,"output_variable_name":"fileName","delay":"0,0","id":"2933636e-4e25-4d8d-be19-ea297c0e0ede","display_text":null,"raw_input":"[{\"Key\":\"VALUE\",\"Value\":\"\"},{\"Key\":\"ALLOW_USER_INPUT\",\"Value\":\"True\"},{\"Key\":\"USER_INPUT_TYPE\",\"Value\":\"Text\"}]","comment":"Nhập tên file data excel"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":1,"element_xpath":null,"output_variable_name":"delay_close","delay":"0,0","id":"b8874aec-72b2-4596-a6e2-e719249de9a7","display_text":null,"raw_input":"[{\"Key\":\"VALUE\",\"Value\":\"\"},{\"Key\":\"ALLOW_USER_INPUT\",\"Value\":\"True\"},{\"Key\":\"USER_INPUT_TYPE\",\"Value\":\"Text\"}]","comment":"Nhập số giây chờ đóng proflie để nhận ref"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":1,"element_xpath":null,"output_variable_name":"file_path","delay":"0,0","id":"8839f9f1-eb61-46ae-8985-6fab33662998","display_text":null,"raw_input":"[{\"Key\":\"VALUE\",\"Value\":\"\"},{\"Key\":\"ALLOW_USER_INPUT\",\"Value\":\"True\"},{\"Key\":\"USER_INPUT_TYPE\",\"Value\":\"Text\"}]","comment":"Nhập đường dẫn thư mục lưu file"}],"expanded":true,"id":"89294a7a-e2dc-47a6-bd77-3c7f0fd4a179","display_text":null,"raw_input":null,"comment":"Before browser opened"},"main_logic":{"$type":"GPMAutomateEditor.Models.NormalBlockNode, GPMAutomateEditor.Models","nodes":[{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":39,"element_xpath":null,"output_variable_name":null,"delay":"0,0","id":"91c8ca0c-cbc2-46cc-b218-e6148af0b025","display_text":null,"raw_input":"[{\"Key\":\"URL\",\"Value\":\"$botLink\"}]","comment":"Truy cập link ref"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":68,"element_xpath":null,"output_variable_name":"href","delay":"0,0","id":"803f876c-400a-4dd6-9631-8044a131d384","display_text":null,"raw_input":"[{\"Key\":\"FILE_OR_CODE\",\"Value\":\"function myFunction() {\\r\\n    // Sử dụng XPath để tìm phần tử với class chứa \\\"tgme_action_web_button\\\"\\r\\n    let element = document.evaluate('//a[contains(@class,\\\"tgme_action_web_button\\\")]', document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\\r\\n\\r\\n    // Kiểm tra nếu phần tử tồn tại và lấy thuộc tính href\\r\\n    if (element) {\\r\\n        let href = element.getAttribute(\\\"href\\\");\\r\\n\\r\\n        // Kiểm tra nếu href chứa \\\"/a\\\" và thay thế bằng \\\"/k\\\"\\r\\n        if (href.includes(\\\"https://web.telegram.org/a/\\\")) {\\r\\n            href = href.replace(\\\"https://web.telegram.org/a/\\\", \\\"https://web.telegram.org/k/\\\");\\r\\n        }\\r\\n        console.log(\\\"Link mới:\\\", href);\\r\\n\\r\\n        // Mở đường link mới trong cửa sổ hiện tại\\r\\n        window.open(href, '_self');\\r\\n        return href;\\r\\n    } else {\\r\\n        console.log(\\\"Không tìm thấy phần tử\\\");\\r\\n        return null;\\r\\n    }\\r\\n}\\r\\n\\r\\n// Gọi hàm\\r\\nmyFunction();\"}]","comment":"chuyển link /a thành /k"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":44,"element_xpath":"//div[@class='popup popup-peer popup-confirmation active']","output_variable_name":null,"delay":"0,0","id":"8df902e0-bae5-452e-b753-5119b3b8f6cd","display_text":null,"raw_input":"[{\"Key\":\"TIME_OUT\",\"Value\":\"30\"}]","comment":"Chờ load bot"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":48,"element_xpath":null,"output_variable_name":null,"delay":"0,0","id":"c202ed94-4550-4547-9bed-244d3f109f58","display_text":null,"raw_input":"[{\"Key\":\"CLICK_TYPE\",\"Value\":\"CLICK_XPATH\"},{\"Key\":\"XPATH\",\"Value\":\"//div[contains(@class, 'popup popup-peer popup-confirmation active')]//button[contains(@class, 'popup-button btn primary')]\"},{\"Key\":\"POS\",\"Value\":\"\"}]","comment":"Click comfirm mở bot"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":7,"element_xpath":null,"output_variable_name":null,"delay":"0,0","id":"4a977c6b-afb2-4c8e-8c18-dce3c368a986","display_text":null,"raw_input":"[{\"Key\":\"MIN\",\"Value\":\"1000\"},{\"Key\":\"MAX\",\"Value\":\"2000\"}]","comment":"Dừng chờ sau khi bấm mở bot"},{"$type":"GPMAutomateEditor.Models.IfBlockNode, GPMAutomateEditor.Models","nodes":[{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":48,"element_xpath":null,"output_variable_name":null,"delay":"0,0","id":"c6a2dbed-5a27-4865-bdf5-f42a1acc10b9","display_text":null,"raw_input":"[{\"Key\":\"CLICK_TYPE\",\"Value\":\"CLICK_XPATH\"},{\"Key\":\"XPATH\",\"Value\":\"//div[contains(@class, 'popup popup-peer popup-confirmation active')]//button[contains(@class, 'popup-button btn primary')]\"},{\"Key\":\"POS\",\"Value\":\"\"}]","comment":"Click confirm mở bot"}],"expanded":true,"id":"81e403fc-09d8-4ebe-be2f-26752cc72062","display_text":null,"raw_input":"[{\"Key\":\"CONDITION\",\"Value\":\"hasElement(//div[@class='popup popup-peer popup-confirmation active'])\"}]","comment":"Kiểm tra xem mở bot được chưa"},{"$type":"GPMAutomateEditor.Models.ElseBlockNode, GPMAutomateEditor.Models","nodes":[{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":44,"element_xpath":"//iframe[@class=\"payment-verification\"]","output_variable_name":null,"delay":"0,0","id":"eb368150-b9dd-4ac0-9616-e46151e840aa","display_text":null,"raw_input":"[{\"Key\":\"TIME_OUT\",\"Value\":\"20\"}]","comment":"Chờ iframe hiện lên"}],"expanded":true,"id":"8509594f-b01b-498c-8e35-96a8fd0b1117","display_text":null,"raw_input":"[]","comment":"Nếu mở rồi thì chờ load iframe"},{"$type":"GPMAutomateEditor.Models.NormalBlockNode, GPMAutomateEditor.Models","nodes":[{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":45,"element_xpath":"//iframe[@class=\"payment-verification\"]","output_variable_name":"src","delay":"0,0","id":"bf775bb2-dfb1-4ab4-869e-0385e26bc7ec","display_text":null,"raw_input":"[{\"Key\":\"ATTR_NAME\",\"Value\":\"src\"}]","comment":"Lấy src của iframe"}],"expanded":true,"id":"dca4fc04-67f5-4227-b5ce-06b28d87bbd8","display_text":null,"raw_input":"[]","comment":"Lấy iframe"},{"$type":"GPMAutomateEditor.Models.NormalBlockNode, GPMAutomateEditor.Models","nodes":[{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":68,"element_xpath":null,"output_variable_name":"querry_id","delay":"0,0","id":"fac8bdcf-7dcf-457c-ae20-e41924e2406f","display_text":null,"raw_input":"[{\"Key\":\"FILE_OR_CODE\",\"Value\":\"const game = document.querySelector('iframe'); const src = game.getAttribute('src'); const startIndex = src.indexOf('#tgWebAppData=') + '#tgWebAppData='.length; const endIndex = src.indexOf('&', startIndex); const query_id = src.substring(startIndex, endIndex); return decodeURIComponent(query_id)\"}]","comment":"get querry_id"}],"expanded":true,"id":"f12614a0-71db-40ce-aef9-ee3c2971be42","display_text":null,"raw_input":"[]","comment":"Xử lý decode lấy querry id"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":7,"element_xpath":null,"output_variable_name":null,"delay":"0,0","id":"11d18be0-a4fa-4986-94aa-4646a735dbc0","display_text":null,"raw_input":"[{\"Key\":\"MIN\",\"Value\":\"$delay_close\"},{\"Key\":\"MAX\",\"Value\":\"$delay_close\"}]","comment":"Chờ đóng app "}],"expanded":true,"id":"196fa593-e2cc-4c68-baa7-8046b46a52d5","display_text":null,"raw_input":null,"comment":"Main logic"},"after_quit":{"$type":"GPMAutomateEditor.Models.NormalBlockNode, GPMAutomateEditor.Models","nodes":[{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":74,"element_xpath":null,"output_variable_name":null,"delay":"0,0","id":"c6e4c655-554d-4308-ac26-4b3376b0071f","display_text":null,"raw_input":"[{\"Key\":\"FILE_PATH\",\"Value\":\"$file_path\\\\$fileName.xlsx\"}]","comment":"Tạo file excel"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":71,"element_xpath":null,"output_variable_name":null,"delay":"0,0","id":"6670360b-de77-4b21-b37f-fb0c90b15171","display_text":null,"raw_input":"[{\"Key\":\"FILE_PATH\",\"Value\":\"$file_path\\\\$fileName.xlsx\"},{\"Key\":\"SHEET_ID\",\"Value\":\"0\"},{\"Key\":\"COL_NAME_OR_INDEX\",\"Value\":\"A\"},{\"Key\":\"DATA\",\"Value\":\"$profileName\"}]","comment":"Ghi profile name"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":71,"element_xpath":null,"output_variable_name":null,"delay":"0,0","id":"346d0e14-4b47-406d-9932-73709f61ae04","display_text":null,"raw_input":"[{\"Key\":\"FILE_PATH\",\"Value\":\"$file_path\\\\$fileName.xlsx\"},{\"Key\":\"SHEET_ID\",\"Value\":\"0\"},{\"Key\":\"COL_NAME_OR_INDEX\",\"Value\":\"B\"},{\"Key\":\"DATA\",\"Value\":\"$src\"}]","comment":"Ghi src app"},{"$type":"GPMAutomateEditor.Models.ActionNode, GPMAutomateEditor.Models","type":71,"element_xpath":null,"output_variable_name":null,"delay":"0,0","id":"429a6c89-b4d3-44f4-a443-61dc88710978","display_text":null,"raw_input":"[{\"Key\":\"FILE_PATH\",\"Value\":\"$file_path\\\\$fileName.xlsx\"},{\"Key\":\"SHEET_ID\",\"Value\":\"0\"},{\"Key\":\"COL_NAME_OR_INDEX\",\"Value\":\"C\"},{\"Key\":\"DATA\",\"Value\":\"$querry_id\"}]","comment":"Ghi querry_id"}],"expanded":true,"id":"0585fec6-508b-4610-a4df-088fa63254b6","display_text":null,"raw_input":null,"comment":"After browser closed"}}